## 토큰 발급 요청

생성된 본인확인 거래요청정보(토큰) `encryptReqClientInfo`를 이용하여 본인확인 서버로 토큰 발급 요청합니다.
- 본인확인서비스 거래토큰은 최초 생성 후 본인확인-API 인증요청이 실행되면 재사용 할 수 없음
- **거래토큰 유효시간은 총 10분으로 인증 요청 후 7분내에 인증처리(이동통신사 기준) 되어야 하며 인증번호 2번 재시도 가능**
- 10분이 넘어가면 새로운 거래토큰을 생성하여 처음부터 처리

#### 본인확인-API 거래토큰 연동 URL

| 메서드  | URL                                                | 환경  |
| ---- | -------------------------------------------------- | --- |
| POST | https://scert-dir.mobile-ok.com/agent/v2/token/get | 개발  |
| POST | https://cert-dir.mobile-ok.com/agent/v2/token/get  | 운영  |

---
## 1️⃣요청

#### 헤더
- HTTPS 암호화 통신 : TLS 1.2 이상

| 이름           | 설명                                                            | 필수  |
| ------------ | ------------------------------------------------------------- | --- |
| Content-Type | Content-Type : application/json; charset=UTF-8  <br>요청 데이터 타입 | O   |
#### 본문

| 이름                   | 타입     | 설명                                            | 필수  |
| -------------------- | ------ | --------------------------------------------- | --- |
| serviceId            | String | 본인확인 이용기관 서비스 ID  <br>(본인확인 암복호화용 키 정보 내 포함됨) | O   |
| encryptReqClientInfo | String | 암호화된 본인확인 거래 요청 정보                            | O   |
| siteUrl              | String | 본인확인서비스 요청 이용기관 등록 도메인                        | O   |

---
## 2️⃣응답

#### 본문

| 이름              | 타입     | 설명                                                            | 필수  |
| --------------- | ------ | ------------------------------------------------------------- | --- |
| encryptMOKToken | String | 암호화된 본인확인-API 거래 토큰                                           | O   |
| publicKey       | String | 사용자 정보를 암호화하기 위한 휴대폰본인확인서버 암호화용 공개키<br>* 암호알고리즘은 RSA-OAEP를 사용 | O   |
| resultCode      | String | 응답 결과 코드  <br>-2000일 경우 성공  <br>-2000이 아닐 경우 에러 처리            | O   |
| resultMsg       | String | 응답 결과 코드가 2000이 아닐 경우 에러 메시지                                  | O   |

---
## 예제

#### 요청
``` shell
curl -X POST https://scert.mobile-ok.com/agent/v2/token/get \
-H "Content-Type: application/json; charset=UTF-8" \
-d '{
         "serviceId" : ${serviceId},
         "encryptReqClientInfo" : ${encryptReqClientInfo},
         "siteUrl" : ${siteUrl}
     }'
```
#### 응답 : 성공
```json
{
	"encryptMOKToken" : "[RBj8YiVJ5e8lOChfhE76+AJj … pikDZMbeegv9r79uVUcMdA==",
	"publicKey" : "MIIBIjANBgkqhkiG … N+Ey0zPfswIDAQAB",
	"resultCode" : "2000",
	"resultMsg" : "success"
}
```
