## 본인확인 인증 요청

본인확인 토큰 발급 요청결과 `encryptMOKToken`과 생성된 인증요청 정보`encryptMOKAuthInfo`를 이용하여 본인확인 인증 요청을 보냅니다.

| 메서드  | URL                                                   | 환경  |
| ---- | ----------------------------------------------------- | --- |
| POST | https://scert-dir.mobile-ok.com/agent/v1/auth/request | 개발  |
| POST | https://cert-dir.mobile-ok.com/agent/v1/auth/request  | 운영  |

---
## 1️⃣요청

#### 헤더

| 이름           | 설명                                                            | 필수  |
| ------------ | ------------------------------------------------------------- | --- |
| Content-Type | Content-Type : application/json; charset=UTF-8  <br>요청 데이터 타입 | O   |
#### 본문

| 이름                 | 타입     | 설명                                                    | 필수  |
| ------------------ | ------ | ----------------------------------------------------- | --- |
| encryptMOKToken    | String | 본인확인 토큰 발급 요청의 응답으로 받은 **encryptMOKToken**            | O   |
| encryptMOKAuthInfo | String | 본인확인-API 인증요청 정보<br>- 서비스 별로 항목이 나누어져 있으니 필요한 서비스만 참고 | O   |
| siteUrl            | String | 본인확인 서비스 신청 URL                                       | O   |

---
## 2️⃣응답

#### 본문

| 이름              | 타입     | 설명                                                 | 필수  |
| --------------- | ------ | -------------------------------------------------- | --- |
| encryptMOKToken | String | 암호화된 본인확인-API 거래 토큰                                | O   |
| resultCode      | String | 응답 결과 코드  <br>-2000일 경우 성공  <br>-2000이 아닐 경우 에러 처리 | O   |
| resultMsg       | String | 응답 결과 코드가 2000이 아닐 경우 에러 메시지                       | O   |
| resendCount     | String | 재시도 가능 횟수(요청 타입이 SMS인 경우)                          |     |

---
## 예제

#### 요청
``` shell
curl -X POST https://scert-dir.mobile-ok.com/agent/v1/auth/request \
-H "Content-Type: application/json; charset=UTF-8" \     
-d '{
         "encryptMOKToken" : ${encryptMOKToken},
         "encryptMOKAuthInfo" : ${encryptMOKAuthInfo},
         "siteUrl" : ${siteUrl}
     }'
```
#### 응답 : 성공
```json
{
"encryptMOKToken" : "[RBj8YiVJ5e8lOChfhE76+AJj … pikDZMbeegv9r79uVUcMdA==",
"resultCode" : "2000",
"resultMsg" : "success",
"resendCount" : "2"
}
```

---
## 재시도

>[!warning] SMS 요청 타입의 본인확인 인증(거래) 요청에서 응답코드(결과코드)가 2000인 경우, 남은 재시도 횟수만큼 재시도가 가능합니다.

| 메서드  | URL                                                  | 환경  |
| ---- | ---------------------------------------------------- | --- |
| POST | https://scert-dir.mobile-ok.com/agent/v1/auth/resend | 개발  |
| POST | https://cert-dir.mobile-ok.com/agent/v1/auth/resend  | 운영  |

---
## 1️⃣요청
#### 헤더

| 이름           | 설명                                                            | 필수  |
| ------------ | ------------------------------------------------------------- | --- |
| Content-Type | Content-Type : application/json; charset=UTF-8  <br>요청 데이터 타입 | O   |
#### 본문

| 이름                 | 타입     | 설명                                                    | 필수  |
| ------------------ | ------ | ----------------------------------------------------- | --- |
| encryptMOKToken    | String | 본인확인 인증(거래) 요청의 응답으로 받은 **encryptMOKToken**           | O   |
| encryptMOKAuthInfo | String | 본인확인-API 인증요청 정보<br>- 서비스 별로 항목이 나누어져 있으니 필요한 서비스만 참고 | O   |
| siteUrl            | String | 본인확인 서비스 신청 URL                                       | O   |

---
## 2️⃣응답

#### 본문

| 이름              | 타입     | 설명                                                 | 필수  |
| --------------- | ------ | -------------------------------------------------- | --- |
| encryptMOKToken | String | 암호화된 본인확인-API 거래 토큰                                | O   |
| resultCode      | String | 응답 결과 코드  <br>-2000일 경우 성공  <br>-2000이 아닐 경우 에러 처리 | O   |
| resultMsg       | String | 응답 결과 코드가 2000이 아닐 경우 에러 메시지                       | O   |
| resendCount     | String | 재시도 가능 횟수(요청 타입이 SMS인 경우)                          | O   |

---
## 예제
#### 요청
``` shell
curl -X POST https://scert-dir.mobile-ok.com/agent/v1/auth/resend \
-H "Content-Type: application/json; charset=UTF-8" \     
-d '{
         "encryptMOKToken" : ${encryptMOKToken},
         "encryptMOKAuthInfo" : ${encryptMOKAuthInfo},
         "siteUrl" : ${siteUrl}
     }'
```
#### 응답 : 성공
```json
{
	"encryptMOKToken":"[PO0/WNDlmNAntM+YVvSWZw ... KFVfd1xJlGr4POYhjg==",
	"resultCode":"2000",
	"resultMsg":"success",
	"resendCount":"1"
}
```

